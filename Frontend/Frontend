{"cells":[{"cell_type":"markdown","metadata":{"id":"iwvjLrXB-Fh7"},"source":["# LOADING AND PREPROCCESING DATA"]},{"cell_type":"markdown","metadata":{"id":"X1mCUPaydJAK"},"source":["## Loading libraries and dataset"]},{"cell_type":"code","execution_count":2,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3879,"status":"ok","timestamp":1654379226022,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"},"user_tz":420},"id":"GQ1PmRoKbcRY","outputId":"68e4af5c-7f4b-427d-8ec5-19aa59a7fcfe"},"outputs":[{"output_type":"stream","name":"stdout","text":["[nltk_data] Downloading package stopwords to /root/nltk_data...\n","[nltk_data]   Unzipping corpora/stopwords.zip.\n","[nltk_data] Downloading package punkt to /root/nltk_data...\n","[nltk_data]   Unzipping tokenizers/punkt.zip.\n"]}],"source":["import numpy as np\n","import pandas as pd\n","from tqdm import tqdm\n","\n","import re\n","import string\n","\n","import nltk\n","from nltk.corpus import stopwords\n","from nltk.stem import WordNetLemmatizer  \n","nltk.download('stopwords')\n","nltk.download('punkt')\n","\n","stop_words = stopwords.words('english')\n","\n","from sklearn.model_selection import train_test_split\n","from sklearn.metrics import confusion_matrix,classification_report\n","from sklearn.feature_extraction.text import CountVectorizer, TfidfVectorizer\n","from sklearn.naive_bayes import MultinomialNB\n","from sklearn.metrics import confusion_matrix,classification_report\n","\n","import matplotlib.pyplot as plt\n","import seaborn as sns"]},{"cell_type":"code","execution_count":3,"metadata":{"executionInfo":{"elapsed":4061,"status":"ok","timestamp":1654379230942,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"},"user_tz":420},"id":"USNIg83Zhe_w"},"outputs":[],"source":["import numpy as np\n","import tensorflow as tf\n","from tensorflow import keras\n","import tensorflow as tf\n","import tensorflow_hub as hub\n","# import tensorflow_text as text\n","import pandas as pd\n","import matplotlib.pyplot as plt\n","import nltk\n","from sklearn.model_selection import train_test_split"]},{"cell_type":"code","execution_count":4,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":73,"resources":{"http://localhost:8080/nbextensions/google.colab/files.js":{"data":"Ly8gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQwovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCi8qKgogKiBAZmlsZW92ZXJ2aWV3IEhlbHBlcnMgZm9yIGdvb2dsZS5jb2xhYiBQeXRob24gbW9kdWxlLgogKi8KKGZ1bmN0aW9uKHNjb3BlKSB7CmZ1bmN0aW9uIHNwYW4odGV4dCwgc3R5bGVBdHRyaWJ1dGVzID0ge30pIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0OwogIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHN0eWxlQXR0cmlidXRlcykpIHsKICAgIGVsZW1lbnQuc3R5bGVba2V5XSA9IHN0eWxlQXR0cmlidXRlc1trZXldOwogIH0KICByZXR1cm4gZWxlbWVudDsKfQoKLy8gTWF4IG51bWJlciBvZiBieXRlcyB3aGljaCB3aWxsIGJlIHVwbG9hZGVkIGF0IGEgdGltZS4KY29uc3QgTUFYX1BBWUxPQURfU0laRSA9IDEwMCAqIDEwMjQ7CgpmdW5jdGlvbiBfdXBsb2FkRmlsZXMoaW5wdXRJZCwgb3V0cHV0SWQpIHsKICBjb25zdCBzdGVwcyA9IHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCk7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICAvLyBDYWNoZSBzdGVwcyBvbiB0aGUgb3V0cHV0RWxlbWVudCB0byBtYWtlIGl0IGF2YWlsYWJsZSBmb3IgdGhlIG5leHQgY2FsbAogIC8vIHRvIHVwbG9hZEZpbGVzQ29udGludWUgZnJvbSBQeXRob24uCiAgb3V0cHV0RWxlbWVudC5zdGVwcyA9IHN0ZXBzOwoKICByZXR1cm4gX3VwbG9hZEZpbGVzQ29udGludWUob3V0cHV0SWQpOwp9CgovLyBUaGlzIGlzIHJvdWdobHkgYW4gYXN5bmMgZ2VuZXJhdG9yIChub3Qgc3VwcG9ydGVkIGluIHRoZSBicm93c2VyIHlldCksCi8vIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBhc3luY2hyb25vdXMgc3RlcHMgYW5kIHRoZSBQeXRob24gc2lkZSBpcyBnb2luZwovLyB0byBwb2xsIGZvciBjb21wbGV0aW9uIG9mIGVhY2ggc3RlcC4KLy8gVGhpcyB1c2VzIGEgUHJvbWlzZSB0byBibG9jayB0aGUgcHl0aG9uIHNpZGUgb24gY29tcGxldGlvbiBvZiBlYWNoIHN0ZXAsCi8vIHRoZW4gcGFzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHByZXZpb3VzIHN0ZXAgYXMgdGhlIGlucHV0IHRvIHRoZSBuZXh0IHN0ZXAuCmZ1bmN0aW9uIF91cGxvYWRGaWxlc0NvbnRpbnVlKG91dHB1dElkKSB7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICBjb25zdCBzdGVwcyA9IG91dHB1dEVsZW1lbnQuc3RlcHM7CgogIGNvbnN0IG5leHQgPSBzdGVwcy5uZXh0KG91dHB1dEVsZW1lbnQubGFzdFByb21pc2VWYWx1ZSk7CiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXh0LnZhbHVlLnByb21pc2UpLnRoZW4oKHZhbHVlKSA9PiB7CiAgICAvLyBDYWNoZSB0aGUgbGFzdCBwcm9taXNlIHZhbHVlIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBuZXh0CiAgICAvLyBzdGVwIG9mIHRoZSBnZW5lcmF0b3IuCiAgICBvdXRwdXRFbGVtZW50Lmxhc3RQcm9taXNlVmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiBuZXh0LnZhbHVlLnJlc3BvbnNlOwogIH0pOwp9CgovKioKICogR2VuZXJhdG9yIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBiZXR3ZWVuIGVhY2ggYXN5bmMgc3RlcCBvZiB0aGUgdXBsb2FkCiAqIHByb2Nlc3MuCiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dElkIEVsZW1lbnQgSUQgb2YgdGhlIGlucHV0IGZpbGUgcGlja2VyIGVsZW1lbnQuCiAqIEBwYXJhbSB7c3RyaW5nfSBvdXRwdXRJZCBFbGVtZW50IElEIG9mIHRoZSBvdXRwdXQgZGlzcGxheS4KICogQHJldHVybiB7IUl0ZXJhYmxlPCFPYmplY3Q+fSBJdGVyYWJsZSBvZiBuZXh0IHN0ZXBzLgogKi8KZnVuY3Rpb24qIHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCkgewogIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0SWQpOwogIGlucHV0RWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOwoKICBjb25zdCBvdXRwdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3V0cHV0SWQpOwogIG91dHB1dEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7CgogIGNvbnN0IHBpY2tlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7CiAgICAgIHJlc29sdmUoZS50YXJnZXQuZmlsZXMpOwogICAgfSk7CiAgfSk7CgogIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGNhbmNlbCk7CiAgY2FuY2VsLnRleHRDb250ZW50ID0gJ0NhbmNlbCB1cGxvYWQnOwogIGNvbnN0IGNhbmNlbFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgY2FuY2VsLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgIHJlc29sdmUobnVsbCk7CiAgICB9OwogIH0pOwoKICAvLyBXYWl0IGZvciB0aGUgdXNlciB0byBwaWNrIHRoZSBmaWxlcy4KICBjb25zdCBmaWxlcyA9IHlpZWxkIHsKICAgIHByb21pc2U6IFByb21pc2UucmFjZShbcGlja2VkUHJvbWlzZSwgY2FuY2VsUHJvbWlzZV0pLAogICAgcmVzcG9uc2U6IHsKICAgICAgYWN0aW9uOiAnc3RhcnRpbmcnLAogICAgfQogIH07CgogIGNhbmNlbC5yZW1vdmUoKTsKCiAgLy8gRGlzYWJsZSB0aGUgaW5wdXQgZWxlbWVudCBzaW5jZSBmdXJ0aGVyIHBpY2tzIGFyZSBub3QgYWxsb3dlZC4KICBpbnB1dEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOwoKICBpZiAoIWZpbGVzKSB7CiAgICByZXR1cm4gewogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbXBsZXRlJywKICAgICAgfQogICAgfTsKICB9CgogIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykgewogICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgbGkuYXBwZW5kKHNwYW4oZmlsZS5uYW1lLCB7Zm9udFdlaWdodDogJ2JvbGQnfSkpOwogICAgbGkuYXBwZW5kKHNwYW4oCiAgICAgICAgYCgke2ZpbGUudHlwZSB8fCAnbi9hJ30pIC0gJHtmaWxlLnNpemV9IGJ5dGVzLCBgICsKICAgICAgICBgbGFzdCBtb2RpZmllZDogJHsKICAgICAgICAgICAgZmlsZS5sYXN0TW9kaWZpZWREYXRlID8gZmlsZS5sYXN0TW9kaWZpZWREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ24vYSd9IC0gYCkpOwogICAgY29uc3QgcGVyY2VudCA9IHNwYW4oJzAlIGRvbmUnKTsKICAgIGxpLmFwcGVuZENoaWxkKHBlcmNlbnQpOwoKICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kQ2hpbGQobGkpOwoKICAgIGNvbnN0IGZpbGVEYXRhUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgIHJlc29sdmUoZS50YXJnZXQucmVzdWx0KTsKICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgfSk7CiAgICAvLyBXYWl0IGZvciB0aGUgZGF0YSB0byBiZSByZWFkeS4KICAgIGxldCBmaWxlRGF0YSA9IHlpZWxkIHsKICAgICAgcHJvbWlzZTogZmlsZURhdGFQcm9taXNlLAogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbnRpbnVlJywKICAgICAgfQogICAgfTsKCiAgICAvLyBVc2UgYSBjaHVua2VkIHNlbmRpbmcgdG8gYXZvaWQgbWVzc2FnZSBzaXplIGxpbWl0cy4gU2VlIGIvNjIxMTU2NjAuCiAgICBsZXQgcG9zaXRpb24gPSAwOwogICAgZG8gewogICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihmaWxlRGF0YS5ieXRlTGVuZ3RoIC0gcG9zaXRpb24sIE1BWF9QQVlMT0FEX1NJWkUpOwogICAgICBjb25zdCBjaHVuayA9IG5ldyBVaW50OEFycmF5KGZpbGVEYXRhLCBwb3NpdGlvbiwgbGVuZ3RoKTsKICAgICAgcG9zaXRpb24gKz0gbGVuZ3RoOwoKICAgICAgY29uc3QgYmFzZTY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNodW5rKSk7CiAgICAgIHlpZWxkIHsKICAgICAgICByZXNwb25zZTogewogICAgICAgICAgYWN0aW9uOiAnYXBwZW5kJywKICAgICAgICAgIGZpbGU6IGZpbGUubmFtZSwKICAgICAgICAgIGRhdGE6IGJhc2U2NCwKICAgICAgICB9LAogICAgICB9OwoKICAgICAgbGV0IHBlcmNlbnREb25lID0gZmlsZURhdGEuYnl0ZUxlbmd0aCA9PT0gMCA/CiAgICAgICAgICAxMDAgOgogICAgICAgICAgTWF0aC5yb3VuZCgocG9zaXRpb24gLyBmaWxlRGF0YS5ieXRlTGVuZ3RoKSAqIDEwMCk7CiAgICAgIHBlcmNlbnQudGV4dENvbnRlbnQgPSBgJHtwZXJjZW50RG9uZX0lIGRvbmVgOwoKICAgIH0gd2hpbGUgKHBvc2l0aW9uIDwgZmlsZURhdGEuYnl0ZUxlbmd0aCk7CiAgfQoKICAvLyBBbGwgZG9uZS4KICB5aWVsZCB7CiAgICByZXNwb25zZTogewogICAgICBhY3Rpb246ICdjb21wbGV0ZScsCiAgICB9CiAgfTsKfQoKc2NvcGUuZ29vZ2xlID0gc2NvcGUuZ29vZ2xlIHx8IHt9OwpzY29wZS5nb29nbGUuY29sYWIgPSBzY29wZS5nb29nbGUuY29sYWIgfHwge307CnNjb3BlLmdvb2dsZS5jb2xhYi5fZmlsZXMgPSB7CiAgX3VwbG9hZEZpbGVzLAogIF91cGxvYWRGaWxlc0NvbnRpbnVlLAp9Owp9KShzZWxmKTsK","headers":[["content-type","application/javascript"]],"ok":true,"status":200,"status_text":""}}},"id":"1knbrDffiJ_K","executionInfo":{"status":"ok","timestamp":1654379297675,"user_tz":420,"elapsed":65994,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"}},"outputId":"3356594b-1631-4df2-b164-46c96b1954e5"},"outputs":[{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.HTML object>"],"text/html":["\n","     <input type=\"file\" id=\"files-de9f3425-55f4-4b96-b487-c3faac154d74\" name=\"files[]\" multiple disabled\n","        style=\"border:none\" />\n","     <output id=\"result-de9f3425-55f4-4b96-b487-c3faac154d74\">\n","      Upload widget is only available when the cell has been executed in the\n","      current browser session. Please rerun this cell to enable.\n","      </output>\n","      <script src=\"/nbextensions/google.colab/files.js\"></script> "]},"metadata":{}},{"output_type":"stream","name":"stdout","text":["Saving annotations.xlsx to annotations.xlsx\n"]}],"source":["#upload the annotations.xlsx\n","from google.colab import files\n","uploaded = files.upload()"]},{"cell_type":"markdown","metadata":{"id":"ImSoGM72dGxc"},"source":["Dropping center (so only right and left remian) and then one-hot encoding\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":14953,"status":"ok","timestamp":1654378545190,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"TRRYake-qyX9","outputId":"e0d4e8a2-fac6-4d82-ebbb-6ab6f5937741"},"outputs":[{"output_type":"stream","name":"stderr","text":["/usr/local/lib/python3.7/dist-packages/ipykernel_launcher.py:4: FutureWarning: In a future version of pandas all arguments of DataFrame.drop except for the argument 'labels' will be keyword-only\n","  after removing the cwd from sys.path.\n"]}],"source":["#convert the excelt data into a data frame\n","df = pd.read_excel(\"annotations.xlsx\",index_col=0 )\n","#drop all columns except for sentence and it's political leaning (type)\n","df.drop(df.columns.difference([\"text\",\"type\"]), 1, inplace=True)\n","\n","\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"4ANQ2OXmq3Nh"},"outputs":[],"source":["df = df[df[\"type\"] != \"center\"]"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":12,"status":"ok","timestamp":1654378545192,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"2owyM0jtscjq","outputId":"5986c525-2eaf-42b5-c6fa-3c2298f46ca2"},"outputs":[{"output_type":"stream","name":"stdout","text":["       left\n","0         0\n","1         1\n","2         1\n","3         0\n","4         0\n","...     ...\n","22462     0\n","22463     0\n","22467     1\n","22469     1\n","22470     0\n","\n","[14476 rows x 1 columns]\n"]}],"source":["one_hot = pd.get_dummies(df[\"type\"])\n","one_hot = one_hot.drop(\"right\",axis = 1)\n","print(one_hot)\n","#Printing only the one hot encoded "]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":229,"status":"ok","timestamp":1654378545412,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"_IBFHxLOs4xD","outputId":"962f5cbf-79e8-41b4-c9f0-715fd25b70e2"},"outputs":[{"output_type":"stream","name":"stdout","text":["                                                    text  left\n","0      The transgender effort to suppress any recogni...     0\n","1      Radical Virginia Citizens Defense League has o...     1\n","2      Miller is the architect of President Donald Tr...     1\n","3      The House Democrats’ 1,400-page coronavirus re...     0\n","4      A specter is haunting the West; our elites see...     0\n","...                                                  ...   ...\n","22462  We used to think of interracial marriage as a ...     0\n","22463  The two men are known to be friendly and frequ...     0\n","22467  But President Donald Trump and his campaign ad...     1\n","22469  And so, while demonstrations began to spread a...     1\n","22470  House and Senate Democrats are responding to t...     0\n","\n","[14476 rows x 2 columns]\n"]}],"source":["#create a one hot encoding by political leaning\n","#drop the type column\n","df = df.drop(\"type\",axis = 1)\n","#add the one hot encoding to the main data frame\n","df = df.join(one_hot)\n","print(df)"]},{"cell_type":"markdown","metadata":{"id":"kpIx04RkdzWm"},"source":["## Splitting the dataset into X (all sentences) and Y all corrosponding labels"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"2qMBLEq1k8pS"},"outputs":[],"source":["#splitting the dataset\n","X = df.iloc[:,0]\n","Y = df.iloc[:, 1]"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":11,"status":"ok","timestamp":1654378545414,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"ftEp101tnZLg","outputId":"aa6edf84-5876-4483-ae50-ec6cc8a43a29"},"outputs":[{"output_type":"stream","name":"stdout","text":["0        The transgender effort to suppress any recogni...\n","1        Radical Virginia Citizens Defense League has o...\n","2        Miller is the architect of President Donald Tr...\n","3        The House Democrats’ 1,400-page coronavirus re...\n","4        A specter is haunting the West; our elites see...\n","                               ...                        \n","22462    We used to think of interracial marriage as a ...\n","22463    The two men are known to be friendly and frequ...\n","22467    But President Donald Trump and his campaign ad...\n","22469    And so, while demonstrations began to spread a...\n","22470    House and Senate Democrats are responding to t...\n","Name: text, Length: 14476, dtype: object\n","0        0\n","1        1\n","2        1\n","3        0\n","4        0\n","        ..\n","22462    0\n","22463    0\n","22467    1\n","22469    1\n","22470    0\n","Name: left, Length: 14476, dtype: uint8\n"]}],"source":["print(X)\n","print(Y)\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":941,"status":"ok","timestamp":1654378546347,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"EdUV6W0fcBtm","outputId":"7f126d0f-f622-4050-e2b8-f0044d1fc731"},"outputs":[{"output_type":"stream","name":"stdout","text":["[nltk_data] Downloading package wordnet to /root/nltk_data...\n","[nltk_data]   Unzipping corpora/wordnet.zip.\n"]}],"source":["sw = stopwords.words('english')\n","nltk.download('wordnet')\n","lemmatizer = WordNetLemmatizer() \n","\n","def clean_text(text):\n","    \n","    text = text.lower()\n","    \n","    text = re.sub(r\"[^a-zA-Z?.!,¿]+\", \" \", text) # replacing everything with space except (a-z, A-Z, \".\", \"?\", \"!\", \",\")\n","    \n","    punctuations = '@#!?+&*[]-%.:/();$=><|{}^' + \"'`\" + '_'\n","    for p in punctuations:\n","        text = text.replace(p,'') #Removing punctuations\n","        \n","    text = [word.lower() for word in text.split() if word.lower() not in sw]\n","    \n","    text = [lemmatizer.lemmatize(word) for word in text]\n","    \n","    text = \" \".join(text) #removing stopwords\n","    return text"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"elapsed":10670,"status":"ok","timestamp":1654378557012,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"w53R1aaAcYpX","outputId":"60ef8be0-49f9-4bbe-ff92-545bf309d918"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["                                                text  left\n","0  transgender effort suppress recognition men wo...     0\n","1  radical virginia citizen defense league organi...     1\n","2  miller architect president donald trump hardli...     1\n","3  house democrat , page coronavirus recovery bil...     0\n","4  specter haunting west elite see intolerant aut...     0"],"text/html":["\n","  <div id=\"df-6b14d86e-05c5-45da-9a9c-637809f21786\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>text</th>\n","      <th>left</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>transgender effort suppress recognition men wo...</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>radical virginia citizen defense league organi...</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>miller architect president donald trump hardli...</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>house democrat , page coronavirus recovery bil...</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>specter haunting west elite see intolerant aut...</td>\n","      <td>0</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-6b14d86e-05c5-45da-9a9c-637809f21786')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-6b14d86e-05c5-45da-9a9c-637809f21786 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-6b14d86e-05c5-45da-9a9c-637809f21786');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":12}],"source":["df['text'] = df['text'].apply(lambda x: clean_text(x))\n"," \n","df.head()"]},{"cell_type":"markdown","metadata":{"id":"TYR6NmnpeBEc"},"source":["Making all sentences lower case in X👇"]},{"cell_type":"markdown","metadata":{"id":"HPl1dLH_e9Zc"},"source":["now that data is tokenized we will split it using train test split👇"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"RudJzyTrvPkl"},"outputs":[],"source":["from sklearn.model_selection import train_test_split\n","X_train, X_test , y_train, y_test = train_test_split(df['text'].values,df['left'].values,test_size=0.2,random_state=123,stratify=df['left'].values)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"JKhRLOqD48f-"},"outputs":[],"source":["tfidf_vectorizer = TfidfVectorizer() "]},{"cell_type":"code","execution_count":null,"metadata":{"id":"F8oVUjOkeA6Y"},"outputs":[],"source":["\n","\n","tfidf_train_vectors = tfidf_vectorizer.fit_transform(X_train)\n","\n","tfidf_test_vectors = tfidf_vectorizer.transform(X_test)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"wdhP4URkkEIW"},"outputs":[],"source":["tfidf_test_vectors = tfidf_vectorizer.transform(X_test)\n","tfidf_train_vectors = tfidf_vectorizer.transform(X_train)"]},{"cell_type":"markdown","metadata":{"id":"shWuReY7eMve"},"source":["# Naive Bayes classifer\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ed4WJoyMeC0A"},"outputs":[],"source":["naive_bayes_classifier = MultinomialNB()\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":8,"status":"ok","timestamp":1654378557691,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"VIiMPHTA4YrJ","outputId":"9f26b1cb-cd64-4399-8cc1-b80614ec1655"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["MultinomialNB()"]},"metadata":{},"execution_count":18}],"source":["naive_bayes_classifier.fit(tfidf_train_vectors, y_train)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"mA1GN4BYeVNM"},"outputs":[],"source":["y_pred = naive_bayes_classifier.predict(tfidf_test_vectors)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":70},"executionInfo":{"elapsed":7,"status":"ok","timestamp":1654378557692,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"wVcL_b1leX1C","outputId":"15d2d18e-6bc1-4740-8e75-dc5b1597e415"},"outputs":[{"output_type":"display_data","data":{"text/plain":["'              precision    recall  f1-score   support\\n\\n           0       0.99      0.99      0.99      1451\\n           1       0.99      0.99      0.99      1445\\n\\n    accuracy                           0.99      2896\\n   macro avg       0.99      0.99      0.99      2896\\nweighted avg       0.99      0.99      0.99      2896\\n'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{}}],"source":["display(classification_report(y_pred,y_test))"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":9,"status":"ok","timestamp":1654378557870,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"3oI0IAbVgipp","outputId":"67ebc34a-c8cd-4e9e-ef4e-b3edffbdd428"},"outputs":[{"output_type":"stream","name":"stdout","text":["[1 1 1 ... 0 1 1]\n"]}],"source":["print(y_pred)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"M0GjjKRJe8I5"},"outputs":[],"source":["names = [\"Right\",\"Left\"]\n","thingss = []\n","for index, value in enumerate(y_pred):\n","  # print(index, value)\n","  thingss.append(names[value])\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":9,"status":"ok","timestamp":1654378557871,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"R7q447_Hhdl0","outputId":"0479d43a-dba3-4ea7-fc67-a5ad3a0888bc"},"outputs":[{"output_type":"stream","name":"stdout","text":["['Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Right', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left', 'Left', 'Right', 'Left', 'Left', 'Right', 'Left', 'Left']\n"]}],"source":["print(thingss)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":265},"executionInfo":{"elapsed":403,"status":"ok","timestamp":1654378558270,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"GN4ZHZTZelEm","outputId":"911a77cd-126f-42de-ad13-7f8e864ad235"},"outputs":[{"output_type":"display_data","data":{"text/plain":["<Figure size 432x288 with 2 Axes>"],"image/png":"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\n"},"metadata":{"needs_background":"light"}}],"source":["cnf_matrix = confusion_matrix(y_test,y_pred)\n","group_names = ['TN','FP','FN','TP']\n","group_counts = [\"{0:0.0f}\".format(value) for value in cnf_matrix.flatten()]\n","labels = [f\"{v1}\\n{v2}\" for v1, v2 in zip(group_names,group_counts)]\n","labels = np.asarray(labels).reshape(2,2)\n","sns.heatmap(cnf_matrix, annot=labels, fmt='', cmap='Blues');"]},{"cell_type":"markdown","metadata":{"id":"rwVG0DYHerAt"},"source":["trying it out for a single sentence"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":201},"executionInfo":{"elapsed":398,"status":"error","timestamp":1654378558664,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"mVlr0aNf0QMo","outputId":"0623a418-4aba-4ddd-c2b5-351bc871d8f0"},"outputs":[{"output_type":"error","ename":"NameError","evalue":"ignored","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)","\u001b[0;32m<ipython-input-25-663e64fd3fcb>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      4\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      5\u001b[0m \u001b[0mpickle\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mdump\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mnaive_bayes_classifier\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"model.pkl\"\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m'wb'\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 6\u001b[0;31m \u001b[0mpickle\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mdump\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mtfdif_vectorizer\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mopen\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"vectorizer.pkl\"\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m\"wb\"\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mNameError\u001b[0m: name 'tfdif_vectorizer' is not defined"]}],"source":["import pickle\n","\n","\n","\n","pickle.dump(naive_bayes_classifier, open(\"model.pkl\", 'wb'))\n","pickle.dump(tfdif_vectorizer, open(\"vectorizer.pkl\", \"wb\"))"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":73,"resources":{"http://localhost:8080/nbextensions/google.colab/files.js":{"data":"Ly8gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQwovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCi8qKgogKiBAZmlsZW92ZXJ2aWV3IEhlbHBlcnMgZm9yIGdvb2dsZS5jb2xhYiBQeXRob24gbW9kdWxlLgogKi8KKGZ1bmN0aW9uKHNjb3BlKSB7CmZ1bmN0aW9uIHNwYW4odGV4dCwgc3R5bGVBdHRyaWJ1dGVzID0ge30pIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0OwogIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHN0eWxlQXR0cmlidXRlcykpIHsKICAgIGVsZW1lbnQuc3R5bGVba2V5XSA9IHN0eWxlQXR0cmlidXRlc1trZXldOwogIH0KICByZXR1cm4gZWxlbWVudDsKfQoKLy8gTWF4IG51bWJlciBvZiBieXRlcyB3aGljaCB3aWxsIGJlIHVwbG9hZGVkIGF0IGEgdGltZS4KY29uc3QgTUFYX1BBWUxPQURfU0laRSA9IDEwMCAqIDEwMjQ7CgpmdW5jdGlvbiBfdXBsb2FkRmlsZXMoaW5wdXRJZCwgb3V0cHV0SWQpIHsKICBjb25zdCBzdGVwcyA9IHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCk7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICAvLyBDYWNoZSBzdGVwcyBvbiB0aGUgb3V0cHV0RWxlbWVudCB0byBtYWtlIGl0IGF2YWlsYWJsZSBmb3IgdGhlIG5leHQgY2FsbAogIC8vIHRvIHVwbG9hZEZpbGVzQ29udGludWUgZnJvbSBQeXRob24uCiAgb3V0cHV0RWxlbWVudC5zdGVwcyA9IHN0ZXBzOwoKICByZXR1cm4gX3VwbG9hZEZpbGVzQ29udGludWUob3V0cHV0SWQpOwp9CgovLyBUaGlzIGlzIHJvdWdobHkgYW4gYXN5bmMgZ2VuZXJhdG9yIChub3Qgc3VwcG9ydGVkIGluIHRoZSBicm93c2VyIHlldCksCi8vIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBhc3luY2hyb25vdXMgc3RlcHMgYW5kIHRoZSBQeXRob24gc2lkZSBpcyBnb2luZwovLyB0byBwb2xsIGZvciBjb21wbGV0aW9uIG9mIGVhY2ggc3RlcC4KLy8gVGhpcyB1c2VzIGEgUHJvbWlzZSB0byBibG9jayB0aGUgcHl0aG9uIHNpZGUgb24gY29tcGxldGlvbiBvZiBlYWNoIHN0ZXAsCi8vIHRoZW4gcGFzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHByZXZpb3VzIHN0ZXAgYXMgdGhlIGlucHV0IHRvIHRoZSBuZXh0IHN0ZXAuCmZ1bmN0aW9uIF91cGxvYWRGaWxlc0NvbnRpbnVlKG91dHB1dElkKSB7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICBjb25zdCBzdGVwcyA9IG91dHB1dEVsZW1lbnQuc3RlcHM7CgogIGNvbnN0IG5leHQgPSBzdGVwcy5uZXh0KG91dHB1dEVsZW1lbnQubGFzdFByb21pc2VWYWx1ZSk7CiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXh0LnZhbHVlLnByb21pc2UpLnRoZW4oKHZhbHVlKSA9PiB7CiAgICAvLyBDYWNoZSB0aGUgbGFzdCBwcm9taXNlIHZhbHVlIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBuZXh0CiAgICAvLyBzdGVwIG9mIHRoZSBnZW5lcmF0b3IuCiAgICBvdXRwdXRFbGVtZW50Lmxhc3RQcm9taXNlVmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiBuZXh0LnZhbHVlLnJlc3BvbnNlOwogIH0pOwp9CgovKioKICogR2VuZXJhdG9yIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBiZXR3ZWVuIGVhY2ggYXN5bmMgc3RlcCBvZiB0aGUgdXBsb2FkCiAqIHByb2Nlc3MuCiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dElkIEVsZW1lbnQgSUQgb2YgdGhlIGlucHV0IGZpbGUgcGlja2VyIGVsZW1lbnQuCiAqIEBwYXJhbSB7c3RyaW5nfSBvdXRwdXRJZCBFbGVtZW50IElEIG9mIHRoZSBvdXRwdXQgZGlzcGxheS4KICogQHJldHVybiB7IUl0ZXJhYmxlPCFPYmplY3Q+fSBJdGVyYWJsZSBvZiBuZXh0IHN0ZXBzLgogKi8KZnVuY3Rpb24qIHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCkgewogIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0SWQpOwogIGlucHV0RWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOwoKICBjb25zdCBvdXRwdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3V0cHV0SWQpOwogIG91dHB1dEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7CgogIGNvbnN0IHBpY2tlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7CiAgICAgIHJlc29sdmUoZS50YXJnZXQuZmlsZXMpOwogICAgfSk7CiAgfSk7CgogIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGNhbmNlbCk7CiAgY2FuY2VsLnRleHRDb250ZW50ID0gJ0NhbmNlbCB1cGxvYWQnOwogIGNvbnN0IGNhbmNlbFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgY2FuY2VsLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgIHJlc29sdmUobnVsbCk7CiAgICB9OwogIH0pOwoKICAvLyBXYWl0IGZvciB0aGUgdXNlciB0byBwaWNrIHRoZSBmaWxlcy4KICBjb25zdCBmaWxlcyA9IHlpZWxkIHsKICAgIHByb21pc2U6IFByb21pc2UucmFjZShbcGlja2VkUHJvbWlzZSwgY2FuY2VsUHJvbWlzZV0pLAogICAgcmVzcG9uc2U6IHsKICAgICAgYWN0aW9uOiAnc3RhcnRpbmcnLAogICAgfQogIH07CgogIGNhbmNlbC5yZW1vdmUoKTsKCiAgLy8gRGlzYWJsZSB0aGUgaW5wdXQgZWxlbWVudCBzaW5jZSBmdXJ0aGVyIHBpY2tzIGFyZSBub3QgYWxsb3dlZC4KICBpbnB1dEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOwoKICBpZiAoIWZpbGVzKSB7CiAgICByZXR1cm4gewogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbXBsZXRlJywKICAgICAgfQogICAgfTsKICB9CgogIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykgewogICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgbGkuYXBwZW5kKHNwYW4oZmlsZS5uYW1lLCB7Zm9udFdlaWdodDogJ2JvbGQnfSkpOwogICAgbGkuYXBwZW5kKHNwYW4oCiAgICAgICAgYCgke2ZpbGUudHlwZSB8fCAnbi9hJ30pIC0gJHtmaWxlLnNpemV9IGJ5dGVzLCBgICsKICAgICAgICBgbGFzdCBtb2RpZmllZDogJHsKICAgICAgICAgICAgZmlsZS5sYXN0TW9kaWZpZWREYXRlID8gZmlsZS5sYXN0TW9kaWZpZWREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ24vYSd9IC0gYCkpOwogICAgY29uc3QgcGVyY2VudCA9IHNwYW4oJzAlIGRvbmUnKTsKICAgIGxpLmFwcGVuZENoaWxkKHBlcmNlbnQpOwoKICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kQ2hpbGQobGkpOwoKICAgIGNvbnN0IGZpbGVEYXRhUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgIHJlc29sdmUoZS50YXJnZXQucmVzdWx0KTsKICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgfSk7CiAgICAvLyBXYWl0IGZvciB0aGUgZGF0YSB0byBiZSByZWFkeS4KICAgIGxldCBmaWxlRGF0YSA9IHlpZWxkIHsKICAgICAgcHJvbWlzZTogZmlsZURhdGFQcm9taXNlLAogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbnRpbnVlJywKICAgICAgfQogICAgfTsKCiAgICAvLyBVc2UgYSBjaHVua2VkIHNlbmRpbmcgdG8gYXZvaWQgbWVzc2FnZSBzaXplIGxpbWl0cy4gU2VlIGIvNjIxMTU2NjAuCiAgICBsZXQgcG9zaXRpb24gPSAwOwogICAgZG8gewogICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihmaWxlRGF0YS5ieXRlTGVuZ3RoIC0gcG9zaXRpb24sIE1BWF9QQVlMT0FEX1NJWkUpOwogICAgICBjb25zdCBjaHVuayA9IG5ldyBVaW50OEFycmF5KGZpbGVEYXRhLCBwb3NpdGlvbiwgbGVuZ3RoKTsKICAgICAgcG9zaXRpb24gKz0gbGVuZ3RoOwoKICAgICAgY29uc3QgYmFzZTY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNodW5rKSk7CiAgICAgIHlpZWxkIHsKICAgICAgICByZXNwb25zZTogewogICAgICAgICAgYWN0aW9uOiAnYXBwZW5kJywKICAgICAgICAgIGZpbGU6IGZpbGUubmFtZSwKICAgICAgICAgIGRhdGE6IGJhc2U2NCwKICAgICAgICB9LAogICAgICB9OwoKICAgICAgbGV0IHBlcmNlbnREb25lID0gZmlsZURhdGEuYnl0ZUxlbmd0aCA9PT0gMCA/CiAgICAgICAgICAxMDAgOgogICAgICAgICAgTWF0aC5yb3VuZCgocG9zaXRpb24gLyBmaWxlRGF0YS5ieXRlTGVuZ3RoKSAqIDEwMCk7CiAgICAgIHBlcmNlbnQudGV4dENvbnRlbnQgPSBgJHtwZXJjZW50RG9uZX0lIGRvbmVgOwoKICAgIH0gd2hpbGUgKHBvc2l0aW9uIDwgZmlsZURhdGEuYnl0ZUxlbmd0aCk7CiAgfQoKICAvLyBBbGwgZG9uZS4KICB5aWVsZCB7CiAgICByZXNwb25zZTogewogICAgICBhY3Rpb246ICdjb21wbGV0ZScsCiAgICB9CiAgfTsKfQoKc2NvcGUuZ29vZ2xlID0gc2NvcGUuZ29vZ2xlIHx8IHt9OwpzY29wZS5nb29nbGUuY29sYWIgPSBzY29wZS5nb29nbGUuY29sYWIgfHwge307CnNjb3BlLmdvb2dsZS5jb2xhYi5fZmlsZXMgPSB7CiAgX3VwbG9hZEZpbGVzLAogIF91cGxvYWRGaWxlc0NvbnRpbnVlLAp9Owp9KShzZWxmKTsK","headers":[["content-type","application/javascript"]],"ok":true,"status":200,"status_text":""}}},"executionInfo":{"elapsed":7661,"status":"ok","timestamp":1653443257636,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"},"user_tz":420},"id":"WwqErGzt4rnI","outputId":"01da3f03-ae63-4321-da23-f5e23e69e381"},"outputs":[{"data":{"text/html":["\n","     <input type=\"file\" id=\"files-2819fd78-f550-4bf5-9a5f-3ebfb6b56e3a\" name=\"files[]\" multiple disabled\n","        style=\"border:none\" />\n","     <output id=\"result-2819fd78-f550-4bf5-9a5f-3ebfb6b56e3a\">\n","      Upload widget is only available when the cell has been executed in the\n","      current browser session. Please rerun this cell to enable.\n","      </output>\n","      <script src=\"/nbextensions/google.colab/files.js\"></script> "],"text/plain":["<IPython.core.display.HTML object>"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["Saving vectorizer.pkl to vectorizer.pkl\n"]}],"source":["from google.colab import files\n","uploaded = files.upload()"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":73,"resources":{"http://localhost:8080/nbextensions/google.colab/files.js":{"data":"Ly8gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQwovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCi8qKgogKiBAZmlsZW92ZXJ2aWV3IEhlbHBlcnMgZm9yIGdvb2dsZS5jb2xhYiBQeXRob24gbW9kdWxlLgogKi8KKGZ1bmN0aW9uKHNjb3BlKSB7CmZ1bmN0aW9uIHNwYW4odGV4dCwgc3R5bGVBdHRyaWJ1dGVzID0ge30pIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0OwogIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHN0eWxlQXR0cmlidXRlcykpIHsKICAgIGVsZW1lbnQuc3R5bGVba2V5XSA9IHN0eWxlQXR0cmlidXRlc1trZXldOwogIH0KICByZXR1cm4gZWxlbWVudDsKfQoKLy8gTWF4IG51bWJlciBvZiBieXRlcyB3aGljaCB3aWxsIGJlIHVwbG9hZGVkIGF0IGEgdGltZS4KY29uc3QgTUFYX1BBWUxPQURfU0laRSA9IDEwMCAqIDEwMjQ7CgpmdW5jdGlvbiBfdXBsb2FkRmlsZXMoaW5wdXRJZCwgb3V0cHV0SWQpIHsKICBjb25zdCBzdGVwcyA9IHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCk7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICAvLyBDYWNoZSBzdGVwcyBvbiB0aGUgb3V0cHV0RWxlbWVudCB0byBtYWtlIGl0IGF2YWlsYWJsZSBmb3IgdGhlIG5leHQgY2FsbAogIC8vIHRvIHVwbG9hZEZpbGVzQ29udGludWUgZnJvbSBQeXRob24uCiAgb3V0cHV0RWxlbWVudC5zdGVwcyA9IHN0ZXBzOwoKICByZXR1cm4gX3VwbG9hZEZpbGVzQ29udGludWUob3V0cHV0SWQpOwp9CgovLyBUaGlzIGlzIHJvdWdobHkgYW4gYXN5bmMgZ2VuZXJhdG9yIChub3Qgc3VwcG9ydGVkIGluIHRoZSBicm93c2VyIHlldCksCi8vIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBhc3luY2hyb25vdXMgc3RlcHMgYW5kIHRoZSBQeXRob24gc2lkZSBpcyBnb2luZwovLyB0byBwb2xsIGZvciBjb21wbGV0aW9uIG9mIGVhY2ggc3RlcC4KLy8gVGhpcyB1c2VzIGEgUHJvbWlzZSB0byBibG9jayB0aGUgcHl0aG9uIHNpZGUgb24gY29tcGxldGlvbiBvZiBlYWNoIHN0ZXAsCi8vIHRoZW4gcGFzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHByZXZpb3VzIHN0ZXAgYXMgdGhlIGlucHV0IHRvIHRoZSBuZXh0IHN0ZXAuCmZ1bmN0aW9uIF91cGxvYWRGaWxlc0NvbnRpbnVlKG91dHB1dElkKSB7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICBjb25zdCBzdGVwcyA9IG91dHB1dEVsZW1lbnQuc3RlcHM7CgogIGNvbnN0IG5leHQgPSBzdGVwcy5uZXh0KG91dHB1dEVsZW1lbnQubGFzdFByb21pc2VWYWx1ZSk7CiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXh0LnZhbHVlLnByb21pc2UpLnRoZW4oKHZhbHVlKSA9PiB7CiAgICAvLyBDYWNoZSB0aGUgbGFzdCBwcm9taXNlIHZhbHVlIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBuZXh0CiAgICAvLyBzdGVwIG9mIHRoZSBnZW5lcmF0b3IuCiAgICBvdXRwdXRFbGVtZW50Lmxhc3RQcm9taXNlVmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiBuZXh0LnZhbHVlLnJlc3BvbnNlOwogIH0pOwp9CgovKioKICogR2VuZXJhdG9yIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBiZXR3ZWVuIGVhY2ggYXN5bmMgc3RlcCBvZiB0aGUgdXBsb2FkCiAqIHByb2Nlc3MuCiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dElkIEVsZW1lbnQgSUQgb2YgdGhlIGlucHV0IGZpbGUgcGlja2VyIGVsZW1lbnQuCiAqIEBwYXJhbSB7c3RyaW5nfSBvdXRwdXRJZCBFbGVtZW50IElEIG9mIHRoZSBvdXRwdXQgZGlzcGxheS4KICogQHJldHVybiB7IUl0ZXJhYmxlPCFPYmplY3Q+fSBJdGVyYWJsZSBvZiBuZXh0IHN0ZXBzLgogKi8KZnVuY3Rpb24qIHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCkgewogIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0SWQpOwogIGlucHV0RWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOwoKICBjb25zdCBvdXRwdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3V0cHV0SWQpOwogIG91dHB1dEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7CgogIGNvbnN0IHBpY2tlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7CiAgICAgIHJlc29sdmUoZS50YXJnZXQuZmlsZXMpOwogICAgfSk7CiAgfSk7CgogIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGNhbmNlbCk7CiAgY2FuY2VsLnRleHRDb250ZW50ID0gJ0NhbmNlbCB1cGxvYWQnOwogIGNvbnN0IGNhbmNlbFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgY2FuY2VsLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgIHJlc29sdmUobnVsbCk7CiAgICB9OwogIH0pOwoKICAvLyBXYWl0IGZvciB0aGUgdXNlciB0byBwaWNrIHRoZSBmaWxlcy4KICBjb25zdCBmaWxlcyA9IHlpZWxkIHsKICAgIHByb21pc2U6IFByb21pc2UucmFjZShbcGlja2VkUHJvbWlzZSwgY2FuY2VsUHJvbWlzZV0pLAogICAgcmVzcG9uc2U6IHsKICAgICAgYWN0aW9uOiAnc3RhcnRpbmcnLAogICAgfQogIH07CgogIGNhbmNlbC5yZW1vdmUoKTsKCiAgLy8gRGlzYWJsZSB0aGUgaW5wdXQgZWxlbWVudCBzaW5jZSBmdXJ0aGVyIHBpY2tzIGFyZSBub3QgYWxsb3dlZC4KICBpbnB1dEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOwoKICBpZiAoIWZpbGVzKSB7CiAgICByZXR1cm4gewogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbXBsZXRlJywKICAgICAgfQogICAgfTsKICB9CgogIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykgewogICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgbGkuYXBwZW5kKHNwYW4oZmlsZS5uYW1lLCB7Zm9udFdlaWdodDogJ2JvbGQnfSkpOwogICAgbGkuYXBwZW5kKHNwYW4oCiAgICAgICAgYCgke2ZpbGUudHlwZSB8fCAnbi9hJ30pIC0gJHtmaWxlLnNpemV9IGJ5dGVzLCBgICsKICAgICAgICBgbGFzdCBtb2RpZmllZDogJHsKICAgICAgICAgICAgZmlsZS5sYXN0TW9kaWZpZWREYXRlID8gZmlsZS5sYXN0TW9kaWZpZWREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ24vYSd9IC0gYCkpOwogICAgY29uc3QgcGVyY2VudCA9IHNwYW4oJzAlIGRvbmUnKTsKICAgIGxpLmFwcGVuZENoaWxkKHBlcmNlbnQpOwoKICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kQ2hpbGQobGkpOwoKICAgIGNvbnN0IGZpbGVEYXRhUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgIHJlc29sdmUoZS50YXJnZXQucmVzdWx0KTsKICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgfSk7CiAgICAvLyBXYWl0IGZvciB0aGUgZGF0YSB0byBiZSByZWFkeS4KICAgIGxldCBmaWxlRGF0YSA9IHlpZWxkIHsKICAgICAgcHJvbWlzZTogZmlsZURhdGFQcm9taXNlLAogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbnRpbnVlJywKICAgICAgfQogICAgfTsKCiAgICAvLyBVc2UgYSBjaHVua2VkIHNlbmRpbmcgdG8gYXZvaWQgbWVzc2FnZSBzaXplIGxpbWl0cy4gU2VlIGIvNjIxMTU2NjAuCiAgICBsZXQgcG9zaXRpb24gPSAwOwogICAgZG8gewogICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihmaWxlRGF0YS5ieXRlTGVuZ3RoIC0gcG9zaXRpb24sIE1BWF9QQVlMT0FEX1NJWkUpOwogICAgICBjb25zdCBjaHVuayA9IG5ldyBVaW50OEFycmF5KGZpbGVEYXRhLCBwb3NpdGlvbiwgbGVuZ3RoKTsKICAgICAgcG9zaXRpb24gKz0gbGVuZ3RoOwoKICAgICAgY29uc3QgYmFzZTY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNodW5rKSk7CiAgICAgIHlpZWxkIHsKICAgICAgICByZXNwb25zZTogewogICAgICAgICAgYWN0aW9uOiAnYXBwZW5kJywKICAgICAgICAgIGZpbGU6IGZpbGUubmFtZSwKICAgICAgICAgIGRhdGE6IGJhc2U2NCwKICAgICAgICB9LAogICAgICB9OwoKICAgICAgbGV0IHBlcmNlbnREb25lID0gZmlsZURhdGEuYnl0ZUxlbmd0aCA9PT0gMCA/CiAgICAgICAgICAxMDAgOgogICAgICAgICAgTWF0aC5yb3VuZCgocG9zaXRpb24gLyBmaWxlRGF0YS5ieXRlTGVuZ3RoKSAqIDEwMCk7CiAgICAgIHBlcmNlbnQudGV4dENvbnRlbnQgPSBgJHtwZXJjZW50RG9uZX0lIGRvbmVgOwoKICAgIH0gd2hpbGUgKHBvc2l0aW9uIDwgZmlsZURhdGEuYnl0ZUxlbmd0aCk7CiAgfQoKICAvLyBBbGwgZG9uZS4KICB5aWVsZCB7CiAgICByZXNwb25zZTogewogICAgICBhY3Rpb246ICdjb21wbGV0ZScsCiAgICB9CiAgfTsKfQoKc2NvcGUuZ29vZ2xlID0gc2NvcGUuZ29vZ2xlIHx8IHt9OwpzY29wZS5nb29nbGUuY29sYWIgPSBzY29wZS5nb29nbGUuY29sYWIgfHwge307CnNjb3BlLmdvb2dsZS5jb2xhYi5fZmlsZXMgPSB7CiAgX3VwbG9hZEZpbGVzLAogIF91cGxvYWRGaWxlc0NvbnRpbnVlLAp9Owp9KShzZWxmKTsK","headers":[["content-type","application/javascript"]],"ok":true,"status":200,"status_text":""}}},"executionInfo":{"elapsed":6927,"status":"ok","timestamp":1653443264543,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"},"user_tz":420},"id":"cYELWWHr5LA3","outputId":"5d61be76-2be7-44d2-cb39-446d0b0d863f"},"outputs":[{"data":{"text/html":["\n","     <input type=\"file\" id=\"files-a9d96dcb-419e-4c9c-8cce-4be1e12cfe6c\" name=\"files[]\" multiple disabled\n","        style=\"border:none\" />\n","     <output id=\"result-a9d96dcb-419e-4c9c-8cce-4be1e12cfe6c\">\n","      Upload widget is only available when the cell has been executed in the\n","      current browser session. Please rerun this cell to enable.\n","      </output>\n","      <script src=\"/nbextensions/google.colab/files.js\"></script> "],"text/plain":["<IPython.core.display.HTML object>"]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["Saving model.pkl to model.pkl\n"]}],"source":["from google.colab import files\n","uploaded = files.upload()"]},{"cell_type":"code","source":["import pickle\n","\n","tfidf_vectorizer = pickle.load(open(\"/content/vectorizer.pkl\",'rb'))\n","naive_bayes_classifier = pickle.load(open(\"/content/model.pkl\",'rb'))\n","tfidf_test_vectors = tfidf_vectorizer.transform(X_test)\n"],"metadata":{"id":"9vbT2WllrJHN"},"execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"metadata":{"id":"KBMlIgUn4_Qd"},"outputs":[],"source":[""]},{"cell_type":"code","execution_count":null,"metadata":{"id":"NkQIGmInnZbM"},"outputs":[],"source":["trackdf = pd.DataFrame(columns = ['Text', 'Predicted'])"]},{"cell_type":"markdown","metadata":{"id":"2ENRXbuJyoWH"},"source":["here are two artcles really right and really left for testing https://libguides.com.edu/c.php?g=649909&p=4556559"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":627},"executionInfo":{"elapsed":193,"status":"ok","timestamp":1652988835987,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"},"user_tz":420},"id":"I8WDbTKqeq0Y","outputId":"302cf776-bb7e-4949-c021-3f35cec5ef30"},"outputs":[{"name":"stdout","output_type":"stream","text":["insane idea country world send loser u\n","Predicted as: Left\n","\n","-----tracker table--------\n"]},{"data":{"text/html":["\n","  <div id=\"df-adc7307e-af21-4ce6-97c9-a868b12e452a\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>Text</th>\n","      <th>Predicted</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>trump is bad</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>trump is good</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>republicans are bad</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>republicans are good</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>abortions are useful</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>abortions are bad</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>liberals are bad</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>liberals are good</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>liberals are helpful</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>democrats are helpful</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>democrats are good</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>democrat will win the next election</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>republicans will win the next election</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>republicans will lose the next election</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>Everything said about President Trump’s “Musli...</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>The former intelligence officials argue that T...</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>Trump has argued that the entry ban is needed ...</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>Amid the hysteria over this prudent pause in r...</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>Soviet Jews were given nearly automatic entry ...</td>\n","      <td>Right</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>This may have been good policy, but let’s not ...</td>\n","      <td>Left</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>insane idea that all countries of the world sh...</td>\n","      <td>Left</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-adc7307e-af21-4ce6-97c9-a868b12e452a')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-adc7307e-af21-4ce6-97c9-a868b12e452a button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-adc7307e-af21-4ce6-97c9-a868b12e452a');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "],"text/plain":["                                                Text Predicted\n","0                                       trump is bad      Left\n","0                                      trump is good     Right\n","0                                republicans are bad      Left\n","0                               republicans are good     Right\n","0                               abortions are useful      Left\n","0                                  abortions are bad     Right\n","0                                   liberals are bad     Right\n","0                                  liberals are good     Right\n","0                               liberals are helpful     Right\n","0                              democrats are helpful     Right\n","0                                 democrats are good     Right\n","0                democrat will win the next election     Right\n","0             republicans will win the next election     Right\n","0            republicans will lose the next election     Right\n","0  Everything said about President Trump’s “Musli...      Left\n","0  The former intelligence officials argue that T...      Left\n","0  Trump has argued that the entry ban is needed ...      Left\n","0  Amid the hysteria over this prudent pause in r...      Left\n","0  Soviet Jews were given nearly automatic entry ...     Right\n","0  This may have been good policy, but let’s not ...      Left\n","0  insane idea that all countries of the world sh...      Left"]},"metadata":{},"output_type":"display_data"}],"source":["input = (\"insane idea that all countries of the world should send their losers to us\")\n","\n","output = clean_text(input)\n","print(output)\n","shapedOutput = [output]\n","tfidf_manual_vector = tfidf_vectorizer.transform(shapedOutput)\n","manualPred = naive_bayes_classifier.predict(tfidf_manual_vector)\n","names = [\"Right\",\"Left\"]\n","print(\"Predicted as:\", names[manualPred[0]])\n","\n","\n","df1 = pd.DataFrame({\"Text\":[input],\n","                         \"Predicted\":names[manualPred[0]]});\n","\n","trackdf = trackdf.append(df1)\n","\n","# manualPred = model.predict(output)\n","# print(manualPred)\n","print(\"\\n-----tracker table--------\")\n","display(trackdf)"]},{"cell_type":"markdown","metadata":{"id":"gTy3jKaf3KYO"},"source":["expermental "]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"background_save":true,"base_uri":"https://localhost:8080/","height":73,"resources":{"http://localhost:8080/nbextensions/google.colab/files.js":{"data":"Ly8gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQwovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKLy8KLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQovLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAovLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAovLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCi8qKgogKiBAZmlsZW92ZXJ2aWV3IEhlbHBlcnMgZm9yIGdvb2dsZS5jb2xhYiBQeXRob24gbW9kdWxlLgogKi8KKGZ1bmN0aW9uKHNjb3BlKSB7CmZ1bmN0aW9uIHNwYW4odGV4dCwgc3R5bGVBdHRyaWJ1dGVzID0ge30pIHsKICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0OwogIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHN0eWxlQXR0cmlidXRlcykpIHsKICAgIGVsZW1lbnQuc3R5bGVba2V5XSA9IHN0eWxlQXR0cmlidXRlc1trZXldOwogIH0KICByZXR1cm4gZWxlbWVudDsKfQoKLy8gTWF4IG51bWJlciBvZiBieXRlcyB3aGljaCB3aWxsIGJlIHVwbG9hZGVkIGF0IGEgdGltZS4KY29uc3QgTUFYX1BBWUxPQURfU0laRSA9IDEwMCAqIDEwMjQ7CgpmdW5jdGlvbiBfdXBsb2FkRmlsZXMoaW5wdXRJZCwgb3V0cHV0SWQpIHsKICBjb25zdCBzdGVwcyA9IHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCk7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICAvLyBDYWNoZSBzdGVwcyBvbiB0aGUgb3V0cHV0RWxlbWVudCB0byBtYWtlIGl0IGF2YWlsYWJsZSBmb3IgdGhlIG5leHQgY2FsbAogIC8vIHRvIHVwbG9hZEZpbGVzQ29udGludWUgZnJvbSBQeXRob24uCiAgb3V0cHV0RWxlbWVudC5zdGVwcyA9IHN0ZXBzOwoKICByZXR1cm4gX3VwbG9hZEZpbGVzQ29udGludWUob3V0cHV0SWQpOwp9CgovLyBUaGlzIGlzIHJvdWdobHkgYW4gYXN5bmMgZ2VuZXJhdG9yIChub3Qgc3VwcG9ydGVkIGluIHRoZSBicm93c2VyIHlldCksCi8vIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBhc3luY2hyb25vdXMgc3RlcHMgYW5kIHRoZSBQeXRob24gc2lkZSBpcyBnb2luZwovLyB0byBwb2xsIGZvciBjb21wbGV0aW9uIG9mIGVhY2ggc3RlcC4KLy8gVGhpcyB1c2VzIGEgUHJvbWlzZSB0byBibG9jayB0aGUgcHl0aG9uIHNpZGUgb24gY29tcGxldGlvbiBvZiBlYWNoIHN0ZXAsCi8vIHRoZW4gcGFzc2VzIHRoZSByZXN1bHQgb2YgdGhlIHByZXZpb3VzIHN0ZXAgYXMgdGhlIGlucHV0IHRvIHRoZSBuZXh0IHN0ZXAuCmZ1bmN0aW9uIF91cGxvYWRGaWxlc0NvbnRpbnVlKG91dHB1dElkKSB7CiAgY29uc3Qgb3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG91dHB1dElkKTsKICBjb25zdCBzdGVwcyA9IG91dHB1dEVsZW1lbnQuc3RlcHM7CgogIGNvbnN0IG5leHQgPSBzdGVwcy5uZXh0KG91dHB1dEVsZW1lbnQubGFzdFByb21pc2VWYWx1ZSk7CiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXh0LnZhbHVlLnByb21pc2UpLnRoZW4oKHZhbHVlKSA9PiB7CiAgICAvLyBDYWNoZSB0aGUgbGFzdCBwcm9taXNlIHZhbHVlIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBuZXh0CiAgICAvLyBzdGVwIG9mIHRoZSBnZW5lcmF0b3IuCiAgICBvdXRwdXRFbGVtZW50Lmxhc3RQcm9taXNlVmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiBuZXh0LnZhbHVlLnJlc3BvbnNlOwogIH0pOwp9CgovKioKICogR2VuZXJhdG9yIGZ1bmN0aW9uIHdoaWNoIGlzIGNhbGxlZCBiZXR3ZWVuIGVhY2ggYXN5bmMgc3RlcCBvZiB0aGUgdXBsb2FkCiAqIHByb2Nlc3MuCiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dElkIEVsZW1lbnQgSUQgb2YgdGhlIGlucHV0IGZpbGUgcGlja2VyIGVsZW1lbnQuCiAqIEBwYXJhbSB7c3RyaW5nfSBvdXRwdXRJZCBFbGVtZW50IElEIG9mIHRoZSBvdXRwdXQgZGlzcGxheS4KICogQHJldHVybiB7IUl0ZXJhYmxlPCFPYmplY3Q+fSBJdGVyYWJsZSBvZiBuZXh0IHN0ZXBzLgogKi8KZnVuY3Rpb24qIHVwbG9hZEZpbGVzU3RlcChpbnB1dElkLCBvdXRwdXRJZCkgewogIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0SWQpOwogIGlucHV0RWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOwoKICBjb25zdCBvdXRwdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3V0cHV0SWQpOwogIG91dHB1dEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7CgogIGNvbnN0IHBpY2tlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7CiAgICAgIHJlc29sdmUoZS50YXJnZXQuZmlsZXMpOwogICAgfSk7CiAgfSk7CgogIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGNhbmNlbCk7CiAgY2FuY2VsLnRleHRDb250ZW50ID0gJ0NhbmNlbCB1cGxvYWQnOwogIGNvbnN0IGNhbmNlbFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgY2FuY2VsLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgIHJlc29sdmUobnVsbCk7CiAgICB9OwogIH0pOwoKICAvLyBXYWl0IGZvciB0aGUgdXNlciB0byBwaWNrIHRoZSBmaWxlcy4KICBjb25zdCBmaWxlcyA9IHlpZWxkIHsKICAgIHByb21pc2U6IFByb21pc2UucmFjZShbcGlja2VkUHJvbWlzZSwgY2FuY2VsUHJvbWlzZV0pLAogICAgcmVzcG9uc2U6IHsKICAgICAgYWN0aW9uOiAnc3RhcnRpbmcnLAogICAgfQogIH07CgogIGNhbmNlbC5yZW1vdmUoKTsKCiAgLy8gRGlzYWJsZSB0aGUgaW5wdXQgZWxlbWVudCBzaW5jZSBmdXJ0aGVyIHBpY2tzIGFyZSBub3QgYWxsb3dlZC4KICBpbnB1dEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOwoKICBpZiAoIWZpbGVzKSB7CiAgICByZXR1cm4gewogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbXBsZXRlJywKICAgICAgfQogICAgfTsKICB9CgogIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykgewogICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgbGkuYXBwZW5kKHNwYW4oZmlsZS5uYW1lLCB7Zm9udFdlaWdodDogJ2JvbGQnfSkpOwogICAgbGkuYXBwZW5kKHNwYW4oCiAgICAgICAgYCgke2ZpbGUudHlwZSB8fCAnbi9hJ30pIC0gJHtmaWxlLnNpemV9IGJ5dGVzLCBgICsKICAgICAgICBgbGFzdCBtb2RpZmllZDogJHsKICAgICAgICAgICAgZmlsZS5sYXN0TW9kaWZpZWREYXRlID8gZmlsZS5sYXN0TW9kaWZpZWREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ24vYSd9IC0gYCkpOwogICAgY29uc3QgcGVyY2VudCA9IHNwYW4oJzAlIGRvbmUnKTsKICAgIGxpLmFwcGVuZENoaWxkKHBlcmNlbnQpOwoKICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kQ2hpbGQobGkpOwoKICAgIGNvbnN0IGZpbGVEYXRhUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewogICAgICAgIHJlc29sdmUoZS50YXJnZXQucmVzdWx0KTsKICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgfSk7CiAgICAvLyBXYWl0IGZvciB0aGUgZGF0YSB0byBiZSByZWFkeS4KICAgIGxldCBmaWxlRGF0YSA9IHlpZWxkIHsKICAgICAgcHJvbWlzZTogZmlsZURhdGFQcm9taXNlLAogICAgICByZXNwb25zZTogewogICAgICAgIGFjdGlvbjogJ2NvbnRpbnVlJywKICAgICAgfQogICAgfTsKCiAgICAvLyBVc2UgYSBjaHVua2VkIHNlbmRpbmcgdG8gYXZvaWQgbWVzc2FnZSBzaXplIGxpbWl0cy4gU2VlIGIvNjIxMTU2NjAuCiAgICBsZXQgcG9zaXRpb24gPSAwOwogICAgZG8gewogICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihmaWxlRGF0YS5ieXRlTGVuZ3RoIC0gcG9zaXRpb24sIE1BWF9QQVlMT0FEX1NJWkUpOwogICAgICBjb25zdCBjaHVuayA9IG5ldyBVaW50OEFycmF5KGZpbGVEYXRhLCBwb3NpdGlvbiwgbGVuZ3RoKTsKICAgICAgcG9zaXRpb24gKz0gbGVuZ3RoOwoKICAgICAgY29uc3QgYmFzZTY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNodW5rKSk7CiAgICAgIHlpZWxkIHsKICAgICAgICByZXNwb25zZTogewogICAgICAgICAgYWN0aW9uOiAnYXBwZW5kJywKICAgICAgICAgIGZpbGU6IGZpbGUubmFtZSwKICAgICAgICAgIGRhdGE6IGJhc2U2NCwKICAgICAgICB9LAogICAgICB9OwoKICAgICAgbGV0IHBlcmNlbnREb25lID0gZmlsZURhdGEuYnl0ZUxlbmd0aCA9PT0gMCA/CiAgICAgICAgICAxMDAgOgogICAgICAgICAgTWF0aC5yb3VuZCgocG9zaXRpb24gLyBmaWxlRGF0YS5ieXRlTGVuZ3RoKSAqIDEwMCk7CiAgICAgIHBlcmNlbnQudGV4dENvbnRlbnQgPSBgJHtwZXJjZW50RG9uZX0lIGRvbmVgOwoKICAgIH0gd2hpbGUgKHBvc2l0aW9uIDwgZmlsZURhdGEuYnl0ZUxlbmd0aCk7CiAgfQoKICAvLyBBbGwgZG9uZS4KICB5aWVsZCB7CiAgICByZXNwb25zZTogewogICAgICBhY3Rpb246ICdjb21wbGV0ZScsCiAgICB9CiAgfTsKfQoKc2NvcGUuZ29vZ2xlID0gc2NvcGUuZ29vZ2xlIHx8IHt9OwpzY29wZS5nb29nbGUuY29sYWIgPSBzY29wZS5nb29nbGUuY29sYWIgfHwge307CnNjb3BlLmdvb2dsZS5jb2xhYi5fZmlsZXMgPSB7CiAgX3VwbG9hZEZpbGVzLAogIF91cGxvYWRGaWxlc0NvbnRpbnVlLAp9Owp9KShzZWxmKTsK","headers":[["content-type","application/javascript"]],"ok":true,"status":200,"status_text":""}}},"executionInfo":{"elapsed":88110,"status":"ok","timestamp":1653254427639,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"},"user_tz":420},"id":"rE--RaPz34Hn","outputId":"ab577805-66de-4b24-b3db-52cb53e39066"},"outputs":[{"data":{"text/html":["\n","     <input type=\"file\" id=\"files-5142e89f-1bac-41d7-8cdf-32247ad58fb8\" name=\"files[]\" multiple disabled\n","        style=\"border:none\" />\n","     <output id=\"result-5142e89f-1bac-41d7-8cdf-32247ad58fb8\">\n","      Upload widget is only available when the cell has been executed in the\n","      current browser session. Please rerun this cell to enable.\n","      </output>\n","      <script src=\"/nbextensions/google.colab/files.js\"></script> "],"text/plain":["<IPython.core.display.HTML object>"]},"metadata":{},"output_type":"display_data"}],"source":["from google.colab import files\n","uploaded = files.upload()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"VP2orjE438Bw"},"outputs":[],"source":["from google.colab import files\n","uploaded = files.upload()"]},{"cell_type":"markdown","metadata":{"id":"roHdZ0aVIwzX"},"source":["# Connecting with the Anvil Frontend"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":417},"executionInfo":{"elapsed":7065,"status":"ok","timestamp":1654378579578,"user":{"displayName":"Raymond Iacobacci","userId":"10431409328588802679"},"user_tz":420},"id":"hjCrh41QI4YH","outputId":"7f795fbe-97ee-4411-9f2d-f50194ca1dcb"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting anvil-uplink\n","  Downloading anvil_uplink-0.3.42-py2.py3-none-any.whl (64 kB)\n","\u001b[K     |████████████████████████████████| 64 kB 2.1 MB/s \n","\u001b[?25hRequirement already satisfied: six in /usr/local/lib/python3.7/dist-packages (from anvil-uplink) (1.15.0)\n","Collecting argparse\n","  Downloading argparse-1.4.0-py2.py3-none-any.whl (23 kB)\n","Requirement already satisfied: future in /usr/local/lib/python3.7/dist-packages (from anvil-uplink) (0.16.0)\n","Collecting ws4py\n","  Downloading ws4py-0.5.1.tar.gz (51 kB)\n","\u001b[K     |████████████████████████████████| 51 kB 174 kB/s \n","\u001b[?25hBuilding wheels for collected packages: ws4py\n","  Building wheel for ws4py (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for ws4py: filename=ws4py-0.5.1-py3-none-any.whl size=45229 sha256=56d1b704f23b591419a9187334fd754e12f512a73121dc70359a82c22ea56b28\n","  Stored in directory: /root/.cache/pip/wheels/29/ea/7d/3410aa0aa0e4402ead9a7a97ab2214804887e0f5c2b76f0c96\n","Successfully built ws4py\n","Installing collected packages: ws4py, argparse, anvil-uplink\n","Successfully installed anvil-uplink-0.3.42 argparse-1.4.0 ws4py-0.5.1\n"]},{"output_type":"display_data","data":{"application/vnd.colab-display-data+json":{"pip_warning":{"packages":["argparse","google"]}}},"metadata":{}}],"source":["!pip install anvil-uplink"]},{"cell_type":"code","execution_count":1,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":322},"executionInfo":{"elapsed":255,"status":"error","timestamp":1654379218188,"user":{"displayName":"Michael Rimboim","userId":"10409174233422570990"},"user_tz":420},"id":"e4__V7orJCqJ","outputId":"377a890c-cf9c-4bee-c8b0-93f104cef0c0"},"outputs":[{"output_type":"error","ename":"ModuleNotFoundError","evalue":"ignored","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mModuleNotFoundError\u001b[0m                       Traceback (most recent call last)","\u001b[0;32m<ipython-input-1-fe8f836aa59f>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0;32mimport\u001b[0m \u001b[0manvil\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mserver\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      2\u001b[0m \u001b[0manvil\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mserver\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mconnect\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m\"AOMDFKG6TFZ6V4ILXADLJBIK-BYH4IBMY52X4HGLP\"\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mModuleNotFoundError\u001b[0m: No module named 'anvil'","","\u001b[0;31m---------------------------------------------------------------------------\u001b[0;32m\nNOTE: If your import is failing due to a missing package, you can\nmanually install dependencies using either !pip or !apt.\n\nTo view examples of installing some common dependencies, click the\n\"Open Examples\" button below.\n\u001b[0;31m---------------------------------------------------------------------------\u001b[0m\n"],"errorDetails":{"actions":[{"action":"open_url","actionText":"Open Examples","url":"/notebooks/snippets/importing_libraries.ipynb"}]}}],"source":["import anvil.server\n","anvil.server.connect(\"AOMDFKG6TFZ6V4ILXADLJBIK-BYH4IBMY52X4HGLP\")"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"PxF3K8YmJ4YM"},"outputs":[],"source":["@anvil.server.callable\n","def predict_bias(input_sentence):\n","  output = clean_text(input_sentence)\n","  shapedOutput = [output]\n","  tfidf_manual_vector = tfidf_vectorizer.transform(shapedOutput)\n","  manualPred = naive_bayes_classifier.predict(tfidf_manual_vector)\n","  names = [\"Right\",\"Left\"]\n","  return names[manualPred[0]]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"RWqYxVY1Klpe"},"outputs":[],"source":["anvil.server.wait_forever()"]}],"metadata":{"colab":{"collapsed_sections":[],"name":"tfidf-NaiveBayes Prototype","provenance":[{"file_id":"1M_JrBLmIMgdHJgpVDBknxeYq8a6xze8X","timestamp":1652984486223},{"file_id":"1VatfiJ-d2VdEk5ws1YuB2dwCPwV3tzC4","timestamp":1652982262649},{"file_id":"1X9ROtUmykK8VJ452_Pa6NjDWqhgeW1Ov","timestamp":1652825314149},{"file_id":"https://github.com/keras-team/keras-io/blob/master/examples/nlp/ipynb/pretrained_word_embeddings.ipynb","timestamp":1652329716403}]},"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.7.0"}},"nbformat":4,"nbformat_minor":0}